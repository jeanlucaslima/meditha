---
import Container from './ui/Container.astro';
import FooterBase from './ui/FooterBase.astro';
import Button from './ui/Button.astro';
import BrandLogo from './ui/BrandLogo.astro';

const currentYear = new Date().getFullYear();

const links = [
  { text: 'Política de Privacidade', href: '/privacy' },
  { text: 'Termos de Uso', href: '/terms' },
  { text: 'Contato', href: 'mailto:contato@meditha.com.br' }
];
---

<FooterBase>
  <Container>
    <div class="space-y-12">
      <!-- Final CTA -->
      <div class="text-center py-12 border-b border-white/10">
        <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">
          Pronta para dormir naturalmente?
        </h3>
        <p class="text-white/80 text-lg mb-8 max-w-2xl mx-auto">
          Garanta acesso imediato ao Checklist Método Lux e coloque suas noites em ordem com apoio humano.
        </p>
        <a
          href="#oferta"
          class="btn bg-accent hover:bg-accent-600 text-white btn-lg shadow-lg hover:shadow-xl transition-all duration-200"
          data-event="durma_cta_click"
          data-position="footer"
        >
          Quero dormir naturalmente
        </a>
      </div>

      <!-- Footer content -->
      <div class="flex flex-col md:flex-row justify-between items-center space-y-6 md:space-y-0">
        <!-- Brand -->
        <div class="text-center md:text-left flex flex-col items-center md:items-start">
          <BrandLogo size="md" class="mb-3" href="/durma" />
          <div class="text-white/70 text-sm">
            Dormir Natural
          </div>
        </div>

        <!-- Links -->
        <nav class="flex flex-wrap justify-center md:justify-end gap-6">
          {links.map((link) => (
            <a
              href={link.href}
              class="text-white/80 hover:text-white text-sm transition-colors"
            >
              {link.text}
            </a>
          ))}
        </nav>
      </div>

      <!-- Disclaimer -->
      <div class="pt-8 border-t border-white/10">
        <div class="bg-white/5 rounded-lg p-6">
          <p class="text-white/70 text-sm leading-relaxed">
            <strong class="text-white">Disclaimer:</strong>
            Este conteúdo é educativo e não substitui aconselhamento médico.
            Se você possui condições médicas relacionadas ao sono, procure orientação profissional.
            O Método Lux oferece técnicas naturais para melhoria da qualidade do sono baseadas em
            hábitos saudáveis e higiene do sono.
          </p>
        </div>
      </div>

      <!-- Copyright -->
      <div class="text-center pt-6 border-t border-white/10">
        <p class="text-white/60 text-sm">
          © {currentYear} Método Lux. Todos os direitos reservados.
        </p>
      </div>
    </div>
  </Container>
</FooterBase>

<script>
  import { trackCTAClick } from '../lib/analytics';

  // Track footer CTA clicks
  const ctaButton = document.querySelector('[data-event="durma_cta_click"][data-position="footer"]');
  if (ctaButton) {
    ctaButton.addEventListener('click', () => {
      trackCTAClick('footer');
    });
  }
</script>
